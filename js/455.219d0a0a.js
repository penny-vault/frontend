"use strict";(self["webpackChunkpenny_vault"]=self["webpackChunkpenny_vault"]||[]).push([[455],{65333:(e,a,l)=>{l.r(a),l.d(a,{default:()=>Qe});var t=l(42874);const o={class:"row q-col-gutter-md"},n={class:"col-lg-6 col-md-5 col-sm-4"},s={class:"q-mt-sm gt-md q-mb-sm"},i={key:0,style:{"font-size":"1rem"}},r={class:"q-mt-sm lt-lg q-mb-md"},d={style:{"font-size":"1.25rem"}},u=(0,t.Uk)(),m={key:0,style:{"font-size":".75rem"}},c={class:"col-lg-6 col-md-7 col-sm-8 gt-xs self-end"},p={class:"row gt-md"},f={class:"col"},b={class:"row xs q-col-gutter-md"},g={class:"col-xs-12 q-pb-md",style:{"padding-top":"4px"}},y={class:"row q-col-gutter-md q-row-gutter-md"},v={class:"col-lg-2 col-md-4 gt-sm q-pl-md"},w={class:"col-sm-12 col-xs-12 lt-md q-pl-md"},k={class:"col-lg-10 col-md-8 col-sm-12 col-xs-12"},q={class:"q-mt-lg"},h={key:0,class:"text-grey-6"};function _(e,a,l,_,W,V){const S=(0,t.up)("q-tab"),D=(0,t.up)("q-tabs"),Z=(0,t.up)("q-breadcrumbs-el"),x=(0,t.up)("q-breadcrumbs"),P=(0,t.up)("strategy-arguments"),U=(0,t.up)("q-expansion-item"),z=(0,t.up)("q-markdown"),R=(0,t.up)("px-card"),j=(0,t.up)("q-tab-panel"),C=(0,t.up)("portfolio-summary"),H=(0,t.up)("portfolio-holdings"),M=(0,t.up)("portfolio-transactions"),E=(0,t.up)("portfolio-returns"),Q=(0,t.up)("q-tab-panels"),T=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(T,{class:"q-pa-xs q-px-md"},{default:(0,t.w5)((()=>[(0,t._)("div",o,[(0,t._)("div",n,[(0,t._)("h4",s,[(0,t.Uk)((0,t.zw)(e.strategy.name)+" ",1),e.simulationRun?((0,t.wg)(),(0,t.iD)("span",i,"("+(0,t.zw)(e.format(e.portfolio.performance.PeriodStart,"MMM"))+" '"+(0,t.zw)(e.format(e.portfolio.performance.PeriodStart,"yy"))+" to "+(0,t.zw)(e.format(e.portfolio.performance.PeriodEnd,"MMM"))+" '"+(0,t.zw)(e.format(e.portfolio.performance.PeriodEnd,"yy"))+")",1)):(0,t.kq)("",!0)]),(0,t._)("div",r,[(0,t._)("span",d,(0,t.zw)(e.strategy.name),1),u,e.simulationRun?((0,t.wg)(),(0,t.iD)("span",m,"("+(0,t.zw)(e.format(e.portfolio.performance.PeriodStart,"MMM"))+" '"+(0,t.zw)(e.format(e.portfolio.performance.PeriodStart,"yy"))+" to "+(0,t.zw)(e.format(e.portfolio.performance.PeriodEnd,"MMM"))+" '"+(0,t.zw)(e.format(e.portfolio.performance.PeriodEnd,"yy"))+")",1)):(0,t.kq)("",!0)])]),(0,t._)("div",c,[(0,t.Wm)(D,{"inline-label":"","outside-arrows":"","mobile-arrows":"",align:"right","active-color":"blue","indicator-color":"blue",modelValue:e.tabModel,"onUpdate:modelValue":a[0]||(a[0]=a=>e.tabModel=a)},{default:(0,t.w5)((()=>[(0,t.Wm)(S,{name:"description",label:"Description"}),(0,t.Wm)(S,{disable:!e.simulationRun,name:"summary",label:"Summary"},null,8,["disable"]),(0,t.Wm)(S,{disable:!e.simulationRun,name:"holdings",label:"Holdings"},null,8,["disable"]),(0,t.Wm)(S,{disable:!e.simulationRun,name:"transactions",label:"Transactions"},null,8,["disable"]),(0,t.Wm)(S,{disable:!e.simulationRun,name:"returns",label:"Returns"},null,8,["disable"])])),_:1},8,["modelValue"])])]),(0,t._)("div",p,[(0,t._)("div",f,[(0,t.Wm)(x,{class:"q-mb-lg"},{default:(0,t.w5)((()=>[(0,t.Wm)(Z,{icon:"home",to:"/app"}),(0,t.Wm)(Z,{label:"Strategies",to:"/app/strategies"}),(0,t.Wm)(Z,{label:e.strategy.name},null,8,["label"])])),_:1})])]),(0,t._)("div",b,[(0,t._)("div",g,[(0,t.Wm)(D,{dense:"","inside-arrows":"","active-color":"blue","indicator-color":"blue",modelValue:e.tabModel,"onUpdate:modelValue":a[1]||(a[1]=a=>e.tabModel=a)},{default:(0,t.w5)((()=>[(0,t.Wm)(S,{name:"description",label:"Description"}),(0,t.Wm)(S,{disable:!e.simulationRun,name:"summary",label:"Summary"},null,8,["disable"]),(0,t.Wm)(S,{disable:!e.simulationRun,name:"holdings",label:"Holdings"},null,8,["disable"]),(0,t.Wm)(S,{disable:!e.simulationRun,name:"transactions",label:"Transactions"},null,8,["disable"]),(0,t.Wm)(S,{disable:!e.simulationRun,name:"returns",label:"Returns"},null,8,["disable"])])),_:1},8,["modelValue"])])]),(0,t._)("div",y,[(0,t._)("div",v,[(0,t.Wm)(P,{strategy:e.strategy,begin:e.simulationStart,end:e.simulationEnd,onExecute:e.onSubmit,onSave:e.onSave},null,8,["strategy","begin","end","onExecute","onSave"])]),(0,t._)("div",w,[(0,t.Wm)(U,{modelValue:e.expandedParameters,"onUpdate:modelValue":a[2]||(a[2]=a=>e.expandedParameters=a),icon:"ion-options",label:"Parameters",dense:""},{default:(0,t.w5)((()=>[(0,t.Wm)(P,{strategy:e.strategy,begin:e.simulationStart,end:e.simulationEnd,onExecute:e.onSubmit,onSave:e.onSave},null,8,["strategy","begin","end","onExecute","onSave"])])),_:1},8,["modelValue"])]),(0,t._)("div",k,[(0,t.Wm)(Q,{style:{background:"rgba(0,0,0,0)!important"},modelValue:e.tabModel,"onUpdate:modelValue":a[3]||(a[3]=a=>e.tabModel=a),animated:""},{default:(0,t.w5)((()=>[(0,t.Wm)(j,{class:"q-pt-none",name:"description"},{default:(0,t.w5)((()=>[(0,t.Wm)(R,{title:"Description"},{default:(0,t.w5)((()=>[(0,t.Wm)(z,{src:e.strategy.longDescription},null,8,["src"])])),_:1})])),_:1}),(0,t.Wm)(j,{class:"q-pt-none q-px-none",name:"summary"},{default:(0,t.w5)((()=>[(0,t.Wm)(C)])),_:1}),(0,t.Wm)(j,{class:"q-pt-none q-pl-sm q-pr-none",name:"holdings"},{default:(0,t.w5)((()=>[(0,t.Wm)(H,{"portfolio-id":e.portfolio.id},null,8,["portfolio-id"])])),_:1}),(0,t.Wm)(j,{class:"q-pt-none q-px-none",name:"transactions"},{default:(0,t.w5)((()=>[(0,t.Wm)(M,{"portfolio-id":e.portfolio.id},null,8,["portfolio-id"])])),_:1}),(0,t.Wm)(j,{class:"q-pt-none q-px-none",name:"returns"},{default:(0,t.w5)((()=>[(0,t.Wm)(E,{"portfolio-id":e.portfolio.id},null,8,["portfolio-id"])])),_:1})])),_:1},8,["modelValue"])])]),(0,t._)("div",q,[e.simulationRun?((0,t.wg)(),(0,t.iD)("span",h,"Computed on: "+(0,t.zw)(e.format(e.portfolio.performance.ComputedOn,"eeee, MMM do yyyy HH:mm:ss")),1)):(0,t.kq)("",!0)])])),_:1})}var W=l(72229),V=l(21999),S=l(19302),D=l(33047),Z=l(91569),x=l(24543),P=l(27124),U=l(50095),z=l(58781),R=l(86204);const j=(0,t.Uk)("Main Settings"),C=(0,t.Uk)("Benchmark"),H=(0,t.Uk)("Advanced Settings"),M={key:0,class:"q-gutter-md"},E={key:1,class:"q-mb-md q-mt-md"},Q={class:"row"},T={class:"col-grow justify-center"},F={class:"col-grow justify-center"},A={class:"col-grow justify-center"},O={class:"col-grow justify-center"},B={class:"col-grow justify-center"},Y={class:"col-grow justify-center"},I={class:"row"},N={class:"col-grow justify-center"},$={class:"col-grow justify-center"},J={class:"col-grow justify-center"},K={class:"col-grow justify-center"},L={class:"col-grow justify-center"},G={class:"col-grow justify-center"};function X(e,a,l,o,n,s){const i=(0,t.up)("q-tooltip"),r=(0,t.up)("q-btn"),d=(0,t.up)("q-select"),u=(0,t.up)("security-picker"),m=(0,t.up)("q-input"),c=(0,t.up)("q-date"),p=(0,t.up)("q-popup-proxy"),f=(0,t.up)("q-icon"),b=(0,t.up)("q-tab-panel"),g=(0,t.up)("q-tab-panels"),y=(0,t.up)("q-form"),v=(0,t.up)("px-card");return(0,t.wg)(),(0,t.j4)(v,{title:"Parameters"},{toolbar:(0,t.w5)((()=>[(0,t.Wm)(r,{onClick:a[0]||(a[0]=a=>e.panel="standard"),dense:"",flat:"",size:"sm",icon:"dashboard",color:"grey-6"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[j])),_:1})])),_:1}),(0,t.Wm)(r,{onClick:a[1]||(a[1]=a=>e.panel="benchmark"),dense:"",flat:"",size:"sm",icon:"assessment",color:"grey-6"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[C])),_:1})])),_:1}),(0,t.Wm)(r,{onClick:a[2]||(a[2]=a=>e.panel="advanced"),dense:"",flat:"",size:"sm",icon:"settings",color:"grey-6"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[H])),_:1})])),_:1})])),default:(0,t.w5)((()=>[(0,t.Wm)(y,{onSubmit:e.onSubmit},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{class:"q-mt-sm",modelValue:e.panel,"onUpdate:modelValue":a[21]||(a[21]=a=>e.panel=a),animated:""},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{name:"standard",class:"q-pa-none"},{default:(0,t.w5)((()=>[e.disabled?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",M,[(0,t.Wm)(d,{modelValue:e.frequentlyUsed,"onUpdate:modelValue":a[3]||(a[3]=a=>e.frequentlyUsed=a),size:"sm",options:e.frequentlyUsedOptions,"options-cover":"","stack-label":"",outlined:"",label:"Frequently used parameters"},null,8,["modelValue","options"])])),e.disabled?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("hr",E)),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.standard,(a=>((0,t.wg)(),(0,t.iD)(t.HY,null,["choice"===a.typecode?((0,t.wg)(),(0,t.j4)(d,{outlined:"",modelValue:e.form[a.arg],"onUpdate:modelValue":l=>e.form[a.arg]=l,key:a.id,name:a.inpid,label:a.name,options:a.options,disable:e.disabled,rules:[e=>!!e||"Field is required"]},null,8,["modelValue","onUpdate:modelValue","name","label","options","disable","rules"])):"[]stock"===a.typecode?((0,t.wg)(),(0,t.j4)(u,{multiple:"",name:a.inpid,key:a.id,label:a.name,modelValue:e.form[a.arg],"onUpdate:modelValue":l=>e.form[a.arg]=l,class:"q-pb-md"},null,8,["name","label","modelValue","onUpdate:modelValue"])):"stock"===a.typecode?((0,t.wg)(),(0,t.j4)(u,{name:a.inpid,key:a.id,label:a.name,modelValue:e.form[a.arg],"onUpdate:modelValue":l=>e.form[a.arg]=l,class:"q-pb-md"},null,8,["name","label","modelValue","onUpdate:modelValue"])):((0,t.wg)(),(0,t.j4)(m,{outlined:"",key:a.id,name:a.inpid,label:a.name,modelValue:e.form[a.arg],"onUpdate:modelValue":l=>e.form[a.arg]=l,type:a.inptype,disable:e.disabled,rules:[e=>!!e||"Field is required"]},null,8,["name","label","modelValue","onUpdate:modelValue","type","disable","rules"]))],64)))),256)),(0,t.Wm)(m,{class:"q-my-none",filled:"",modelValue:e.startDate,"onUpdate:modelValue":a[11]||(a[11]=a=>e.startDate=a),mask:"date",label:"Start Date",rules:["date",e.checkStartDate]},{append:(0,t.w5)((()=>[(0,t.Wm)(f,{name:"event",class:"cursor-pointer"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{ref:"qStartDateProxy","transition-show":"scale","transition-hide":"scale"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:e.startDate,"onUpdate:modelValue":a[10]||(a[10]=a=>e.startDate=a),minimal:""},{default:(0,t.w5)((()=>[(0,t._)("div",Q,[(0,t._)("div",T,[(0,t.Wm)(r,{label:"ytd",size:"md",color:"info",onClick:a[4]||(a[4]=a=>e.dateRange(0)),dense:"",flat:""})]),(0,t._)("div",F,[(0,t.Wm)(r,{label:"1y",size:"md",color:"info",onClick:a[5]||(a[5]=a=>e.dateRange(12)),dense:"",flat:""})]),(0,t._)("div",A,[(0,t.Wm)(r,{label:"3y",size:"md",color:"info",onClick:a[6]||(a[6]=a=>e.dateRange(36)),dense:"",flat:""})]),(0,t._)("div",O,[(0,t.Wm)(r,{label:"5y",size:"md",color:"info",onClick:a[7]||(a[7]=a=>e.dateRange(60)),dense:"",flat:""})]),(0,t._)("div",B,[(0,t.Wm)(r,{label:"10y",size:"md",color:"info",onClick:a[8]||(a[8]=a=>e.dateRange(120)),dense:"",flat:""})]),(0,t._)("div",Y,[(0,t.Wm)(r,{label:"15y",size:"md",color:"info",onClick:a[9]||(a[9]=a=>e.dateRange(180)),dense:"",flat:""})])])])),_:1},8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["modelValue","rules"]),(0,t.Wm)(m,{class:"q-my-none",filled:"",modelValue:e.endDate,"onUpdate:modelValue":a[19]||(a[19]=a=>e.endDate=a),mask:"date",label:"End Date",rules:["date",e.checkEndDate]},{append:(0,t.w5)((()=>[(0,t.Wm)(f,{name:"event",class:"cursor-pointer"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{ref:"qEndDateProxy","transition-show":"scale","transition-hide":"scale"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{modelValue:e.endDate,"onUpdate:modelValue":a[18]||(a[18]=a=>e.endDate=a),minimal:""},{default:(0,t.w5)((()=>[(0,t._)("div",I,[(0,t._)("div",N,[(0,t.Wm)(r,{label:"ytd",size:"md",color:"info",onClick:a[12]||(a[12]=a=>e.dateRange(0)),dense:"",flat:""})]),(0,t._)("div",$,[(0,t.Wm)(r,{label:"1y",size:"md",color:"info",onClick:a[13]||(a[13]=a=>e.dateRange(12)),dense:"",flat:""})]),(0,t._)("div",J,[(0,t.Wm)(r,{label:"3y",size:"md",color:"info",onClick:a[14]||(a[14]=a=>e.dateRange(36)),dense:"",flat:""})]),(0,t._)("div",K,[(0,t.Wm)(r,{label:"5y",size:"md",color:"info",onClick:a[15]||(a[15]=a=>e.dateRange(60)),dense:"",flat:""})]),(0,t._)("div",L,[(0,t.Wm)(r,{label:"10y",size:"md",color:"info",onClick:a[16]||(a[16]=a=>e.dateRange(120)),dense:"",flat:""})]),(0,t._)("div",G,[(0,t.Wm)(r,{label:"15y",size:"md",color:"info",onClick:a[17]||(a[17]=a=>e.dateRange(180)),dense:"",flat:""})])])])),_:1},8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["modelValue","rules"])])),_:1}),(0,t.Wm)(b,{name:"benchmark",class:"q-pa-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{outlined:"",name:"benchmarkTickerId",label:"Benchmark",modelValue:e.benchmarkTickerData,"onUpdate:modelValue":a[20]||(a[20]=a=>e.benchmarkTickerData=a)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(b,{name:"advanced",class:"q-pa-none"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.advanced,(a=>((0,t.wg)(),(0,t.j4)(m,{outlined:"",key:a.id,name:a.inpid,label:a.name,modelValue:e.form[a.arg],"onUpdate:modelValue":l=>e.form[a.arg]=l,type:a.inptype,disable:e.disabled,rules:[e=>!!e||"Field is required"]},null,8,["name","label","modelValue","onUpdate:modelValue","type","disable","rules"])))),128))])),_:1})])),_:1},8,["modelValue"]),e.disabled?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(r,{key:0,class:"q-mt-sm",icon:"bolt",type:"submit",color:"primary",label:"Run Strategy"})),e.disabled?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(r,{key:1,class:"q-mt-sm",icon:"ion-bookmark",type:"button",color:"info",label:"Save as portfolio",onClick:e.onSave},null,8,["onClick"]))])),_:1},8,["onSubmit"])])),_:1})}l(40702);var ee=l(95689),ae=l(24307),le=l(33438),te=l(24409);const oe={class:"q-gutter-md row items-start"},ne=(0,t.Uk)(" No results ");function se(e,a,l,o,n,s){const i=(0,t.up)("q-item-label"),r=(0,t.up)("q-item-section"),d=(0,t.up)("q-item"),u=(0,t.up)("q-chip"),m=(0,t.up)("q-select");return(0,t.wg)(),(0,t.iD)("div",oe,[(0,t.Wm)(m,{filled:"",ref:"picker",modelValue:e.model,"onUpdate:modelValue":[a[0]||(a[0]=a=>e.model=a),e.updateModelValue],"stack-label":"","use-input":"","hide-dropdown-icon":"","input-debounce":"0",label:e.label,"menu-anchor":"bottom left","virtual-scroll-slice-size":"4",multiple:e.multiple,options:e.options,onFilter:e.filterFn},{option:(0,t.w5)((e=>[(0,t.Wm)(d,(0,t.vs)((0,t.F4)(e.itemProps)),{default:(0,t.w5)((()=>[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,t.zw)(e.opt.ticker),1)])),_:2},1024),(0,t.Wm)(i,{caption:""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,t.zw)(e.opt.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),"no-option":(0,t.w5)((()=>[(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[(0,t.Wm)(r,{class:"text-grey"},{default:(0,t.w5)((()=>[ne])),_:1})])),_:1})])),"selected-item":(0,t.w5)((e=>[(0,t.Wm)(u,{removable:"",dense:"",onRemove:a=>e.removeAtIndex(e.index),color:"white","text-color":"secondary",style:{"margin-left":"0px","margin-top":"2px","margin-bottom":"2px","margin-right":"2px"}},{default:(0,t.w5)((()=>[(0,t.Uk)((0,t.zw)(e.opt.ticker),1)])),_:2},1032,["onRemove"])])),_:1},8,["modelValue","label","multiple","options","onFilter","onUpdate:modelValue"])])}function ie(e,a,l="modelValue"){return(0,t.Fl)({get:()=>e[l],set:e=>a(`update:${l}`,e)})}const re=(0,t.aZ)({name:"SecurityPicker",props:{modelValue:[Object,Array],multiple:Boolean,label:{type:String,default(e){return!0===e.multiple?"Select securities":"Select security"}}},setup(e,{emit:a}){const l=(0,t.iH)([]),o=(0,t.iH)(null);return{options:l,picker:o,model:ie(e,a,"modelValue"),filterFn(e,a,t){a((async()=>{const a=await D.bE.getTokenSilently();Z.api.get(`/security?q=${e}`,{headers:{Authorization:`Bearer ${a}`,Range:"items=0-3"}}).then((e=>{l.value=e.data})).catch((function(e){console.log(e),t()}))}))},updateModelValue(){o.value.updateInputValue(""),setTimeout((()=>o.value.hidePopup()),1)}}}});var de=l(11639),ue=l(18401),me=l(490),ce=l(76749),pe=l(33115),fe=l(57691),be=l(69984),ge=l.n(be);const ye=(0,de.Z)(re,[["render",se]]),ve=ye;ge()(re,"components",{QSelect:ue.Z,QItem:me.Z,QItemSection:ce.Z,QItemLabel:pe.Z,QChip:fe.Z});const we=(0,t.aZ)({name:"StrategyArguments",props:{strategy:Object,disabled:{type:Boolean,default:!1},begin:{type:Date,default:new Date(1982,7,27)},end:{type:Date,default:new Date}},components:{PxCard:R.Z,SecurityPicker:ve},emits:["execute","save"],setup(e,{emit:a}){const{strategy:l,begin:o,end:n,benchmarkTicker:s}=(0,t.BK)(e),i=(0,t.iH)("yyyy/MM/dd"),r=(0,t.iH)({}),d=(0,t.iH)([]),u=(0,t.iH)([]),m=(0,t.iH)([]),c=(0,t.iH)("standard"),p=(0,t.iH)(""),f=(0,t.iH)([]),b=(0,t.iH)((0,te.clone)(s)),g=(0,t.iH)((0,W.Z)(e.begin,i.value)),y=(0,t.iH)((0,W.Z)(e.end,i.value)),v=(0,t.iH)(null),w=(0,t.iH)(null);async function k(){m.value=[],u.value=[],Object.entries(l.value.arguments).forEach((e=>{const[a,l]=e;var t={arg:a,name:l.name,description:l.description,advanced:l.advanced,id:l.name+"_id",inpid:l.name+"_inp_id",inptype:"text",typecode:l.typecode,inpdefault:l.default,options:l.options,required:!0};if("number"==l.typecode&&(t.inptype="number",t.inpdefault=Number(t.inpdefault)),"[]string"==l.typecode){var o=t.inpdefault;"string"===typeof t.inpdefault&&(o=JSON.parse(o)),t.inpdefault=o.join(" ")}if("stock"==l.typecode||"[]stock"==l.typecode){o=t.inpdefault;"string"===typeof t.inpdefault&&(o=JSON.parse(o)),t.inpdefault=o}d.value.push(t),t.advanced?m.value.push(t):u.value.push(t),r.value[t.arg]=t.inpdefault}))}async function q(){f.value=[],Object.entries(l.value.suggestedParams).forEach((e=>{var a={label:e[0],value:e[1]};f.value.push(a)}))}async function h(e){e.preventDefault();let t={args:(0,te.clone)(r.value),begin:(0,ee.Z)((0,ae.Z)(g.value,i.value,new Date)),benchmarkTicker:(0,te.clone)(b.value.compositeFigi)};Object.entries(l.value.arguments).forEach((e=>{const[a,l]=e;switch(l.typecode){case"[]string":t.args[a]=t.args[a].split(" ");break;case"number":t.args[a]=Number(t.args[a]);break}})),a("save",t)}async function _(e){e.preventDefault();let t={userArgs:(0,te.clone)(r.value),begin:(0,ae.Z)(g.value,i.value,new Date),end:(0,ae.Z)(y.value,i.value,new Date),benchmarkTicker:(0,te.clone)(b.value.compositeFigi)};Object.entries(l.value.arguments).forEach((e=>{const[a,l]=e;switch(l.typecode){case"[]string":t.userArgs[a]=t.userArgs[a].split(" ");break;case"number":t.userArgs[a]=Number(t.userArgs[a]);break}})),a("execute",t)}function V(e){const a=(0,ae.Z)(e,i.value,new Date);let l=(0,ae.Z)(y.value,i.value,new Date);return l=(0,le.Z)(l,1),a<l||"start > end - 1 month"}function S(e){let a=(0,ae.Z)(e,i.value,new Date);const l=(0,ae.Z)(g.value,i.value,new Date);return a=(0,le.Z)(a,1),l<a||"start > end - 1 month"}function D(e){const a=new Date;let l=null;l=0===e?new Date(a.getFullYear(),0,1):(0,le.Z)(a,e),g.value=(0,W.Z)(l,i.value),y.value=(0,W.Z)(a,i.value),v.value.hide(),w.value.hide()}return(0,t.YP)(l,(e=>{k(),q(),b.value=(0,te.clone)(l.value.benchmark)})),(0,t.YP)(p,(e=>{let a=e.value;d.value.forEach((e=>{let l=a[e.arg];switch(e.typecode){case"[]string":r.value[e.arg]=JSON.parse(l).join(" ");break;case"number":r.value[e.arg]=Number(l);break;default:r.value[e.arg]=l}}))})),(0,t.YP)(o,(e=>{g.value=(0,W.Z)(e,i.value)})),(0,t.YP)(n,(e=>{y.value=(0,W.Z)(e,i.value)})),(0,t.YP)(g,(e=>{v.value.hide()})),(0,t.YP)(y,(e=>{w.value.hide()})),(0,t.bv)((async()=>{k(),q()})),{advanced:m,benchmarkTickerData:b,checkStartDate:V,checkEndDate:S,dateRange:D,form:r,frequentlyUsed:p,frequentlyUsedOptions:f,onSave:h,onSubmit:_,panel:c,spec:d,standard:u,startDate:g,endDate:y,qStartDateProxy:v,qEndDateProxy:w}}});var ke=l(68879),qe=l(46858),he=l(8326),_e=l(89800),We=l(84106),Ve=l(66611),Se=l(22857),De=l(52765),Ze=l(34939);const xe=(0,de.Z)(we,[["render",X]]),Pe=xe;ge()(we,"components",{QBtn:ke.Z,QTooltip:qe.Z,QForm:he.Z,QTabPanels:_e.Z,QTabPanel:We.Z,QSelect:ue.Z,QInput:Ve.Z,QIcon:Se.Z,QPopupProxy:De.Z,QDate:Ze.Z});const Ue=(0,t.aZ)({name:"Strategy",props:{strategyShortCode:String},components:{PortfolioHoldings:x.Z,PortfolioReturns:P.Z,PortfolioSummary:U.Z,PortfolioTransactions:z.Z,PxCard:R.Z,StrategyArguments:Pe},setup(e){const a=(0,V.oR)(),l=(0,S.Z)(),o=(0,t.iH)(!0),n=(0,t.iH)(new Date(1980,0,1)),s=(0,t.iH)(new Date),i=(0,t.iH)("description");a.commit("strategy/setSimulationExecuted",!1),a.commit("portfolio/clearCurrentPortfolio"),a.commit("portfolio/clearBenchmark"),a.dispatch("strategy/fetchStrategy",e.strategyShortCode);const r=(0,t.Fl)((()=>a.state.strategy.current)),d=(0,t.Fl)((()=>a.state.strategy.simulation.executed)),u=(0,t.Fl)((()=>a.state.portfolio.current));async function m({args:e,begin:a,benchmarkTicker:t}){const o=await D.bE.getTokenSilently();var n={name:r.value.name,arguments:e,strategy:r.value.shortcode,benchmarkTicker:t,startDate:a};const s="/portfolio/";Z.api.post(s,n,{headers:{Authorization:`Bearer ${o}`}}).then((e=>{l.notify({message:"Saved portfolio",progress:!0,color:"positive",icon:"success",position:"top"})})).catch((e=>{l.notify({message:`Failed to save portfolio: ${e}`,progress:!0,color:"negative",icon:"error",position:"top"})}))}async function c({userArgs:l,begin:t,end:n,benchmarkTicker:s}){a.dispatch("strategy/executeStrategy",{shortCode:e.strategyShortCode,name:r.value.name,stratParams:l,startDate:t,endDate:n,benchmark:s}),o.value=!1}return(0,t.YP)(u,(()=>{i.value="summary"})),{expandedParameters:o,format:W.Z,portfolio:u,simulationRun:d,simulationStart:n,simulationEnd:s,strategy:r,tabModel:i,onSave:m,onSubmit:c}}});var ze=l(69885),Re=l(47817),je=l(70900),Ce=l(72605),He=l(28052),Me=l(61123);const Ee=(0,de.Z)(Ue,[["render",_]]),Qe=Ee;ge()(Ue,"components",{QPage:ze.Z,QTabs:Re.Z,QTab:je.Z,QBreadcrumbs:Ce.Z,QBreadcrumbsEl:He.Z,QExpansionItem:Me.Z,QTabPanels:_e.Z,QTabPanel:We.Z})}}]);