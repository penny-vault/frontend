"use strict";(self["webpackChunkpenny_vault"]=self["webpackChunkpenny_vault"]||[]).push([[189],{82552:(o,e,t)=>{t.r(e),t.d(e,{default:()=>J});var l=t(42874);const a={class:"row q-col-gutter-md q-pl-sm"},r={class:"col-lg-6 col-md-5 col-sm-4"},i={class:"q-mt-sm gt-md q-mb-sm"},n={key:0,style:{"font-size":"1rem"}},s={class:"q-mt-sm lt-lg q-mb-md"},m={style:{"font-size":"1.25rem"}},d=(0,l.Uk)(),p={key:0,style:{"font-size":".75rem"}},f={class:"col-lg-6 col-sm-8 gt-xs self-end"},u={class:"row q-pl-sm"},c={class:"col"},b={class:"row xs"},g={class:"col"},y={key:0,class:"text-center q-ml-md q-mb-sm text-grey-6"};function v(o,e,t,v,w,P){const h=(0,l.up)("q-tab"),q=(0,l.up)("q-tabs"),W=(0,l.up)("q-breadcrumbs-el"),_=(0,l.up)("q-breadcrumbs"),k=(0,l.up)("portfolio-summary"),S=(0,l.up)("q-tab-panel"),M=(0,l.up)("portfolio-holdings"),Z=(0,l.up)("portfolio-transactions"),z=(0,l.up)("portfolio-returns"),V=(0,l.up)("portfolio-settings"),Q=(0,l.up)("q-tab-panels"),E=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(E,{class:"q-pa-xs"},{default:(0,l.w5)((()=>[(0,l._)("div",a,[(0,l._)("div",r,[(0,l._)("h4",i,[(0,l.Uk)((0,l.zw)(o.portfolio.name)+" ",1),o.portfolioLoaded?((0,l.wg)(),(0,l.iD)("span",n,"("+(0,l.zw)(o.format(o.portfolio.performance.PeriodStart,"MMM"))+" '"+(0,l.zw)(o.format(o.portfolio.performance.PeriodStart,"yy"))+" to "+(0,l.zw)(o.format(o.portfolio.performance.PeriodEnd,"MMM"))+" '"+(0,l.zw)(o.format(o.portfolio.performance.PeriodEnd,"yy"))+")",1)):(0,l.kq)("",!0)]),(0,l._)("div",s,[(0,l._)("span",m,(0,l.zw)(o.portfolio.name),1),d,o.portfolio.performance.PeriodStart?((0,l.wg)(),(0,l.iD)("span",p,"("+(0,l.zw)(o.format(o.portfolio.performance.PeriodStart,"MMM"))+" '"+(0,l.zw)(o.format(o.portfolio.performance.PeriodStart,"yy"))+" to "+(0,l.zw)(o.format(o.portfolio.performance.PeriodEnd,"MMM"))+" '"+(0,l.zw)(o.format(o.portfolio.performance.PeriodEnd,"yy"))+")",1)):(0,l.kq)("",!0)])]),(0,l._)("div",f,[(0,l.Wm)(q,{"inline-label":"","outside-arrows":"","mobile-arrows":"",align:"right","active-color":"blue","indicator-color":"blue",modelValue:o.tabModel,"onUpdate:modelValue":e[0]||(e[0]=e=>o.tabModel=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{disable:!o.portfolio.performance.PeriodStart,name:"summary",label:"Summary"},null,8,["disable"]),(0,l.Wm)(h,{disable:!o.portfolio.performance.PeriodStart,name:"holdings",label:"Holdings"},null,8,["disable"]),(0,l.Wm)(h,{disable:!o.portfolio.performance.PeriodStart,name:"transactions",label:"Transactions"},null,8,["disable"]),(0,l.Wm)(h,{disable:!o.portfolio.performance.PeriodStart,name:"returns",label:"Returns"},null,8,["disable"]),(0,l.Wm)(h,{disable:!o.portfolio.performance.PeriodStart,name:"settings",label:"Settings"},null,8,["disable"])])),_:1},8,["modelValue"])])]),(0,l._)("div",u,[(0,l._)("div",c,[(0,l.Wm)(_,{class:"q-mb-lg"},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{icon:"home",to:"/app"}),(0,l.Wm)(W,{label:"My Portfolios",to:"/app/portfolio"}),(0,l.Wm)(W,{label:o.portfolio.name},null,8,["label"])])),_:1})])]),(0,l._)("div",b,[(0,l._)("div",g,[(0,l.Wm)(q,{dense:"","inside-arrows":"",align:"right","active-color":"blue","indicator-color":"blue",modelValue:o.tabModel,"onUpdate:modelValue":e[1]||(e[1]=e=>o.tabModel=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{disable:!o.portfolioLoaded,name:"summary",label:"Summary"},null,8,["disable"]),(0,l.Wm)(h,{disable:!o.portfolioLoaded,name:"holdings",label:"Holdings"},null,8,["disable"]),(0,l.Wm)(h,{disable:!o.portfolioLoaded,name:"transactions",label:"Transactions"},null,8,["disable"]),(0,l.Wm)(h,{disable:!o.portfolioLoaded,name:"returns",label:"Returns"},null,8,["disable"]),(0,l.Wm)(h,{disable:!o.portfolioLoaded,name:"settings",label:"Settings"},null,8,["disable"])])),_:1},8,["modelValue"])])]),(0,l.Wm)(Q,{class:"transparent",modelValue:o.tabModel,"onUpdate:modelValue":e[2]||(e[2]=e=>o.tabModel=e),animated:""},{default:(0,l.w5)((()=>[(0,l.Wm)(S,{name:"summary"},{default:(0,l.w5)((()=>[o.portfolioLoaded?((0,l.wg)(),(0,l.j4)(k,{key:0})):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(S,{name:"holdings"},{default:(0,l.w5)((()=>[(0,l.Wm)(M,{"portfolio-id":o.portfolioId},null,8,["portfolio-id"])])),_:1}),(0,l.Wm)(S,{name:"transactions"},{default:(0,l.w5)((()=>[(0,l.Wm)(Z,{"portfolio-id":o.portfolioId},null,8,["portfolio-id"])])),_:1}),(0,l.Wm)(S,{name:"returns"},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{"portfolio-id":o.portfolioId},null,8,["portfolio-id"])])),_:1}),(0,l.Wm)(S,{name:"settings"},{default:(0,l.w5)((()=>[(0,l.Wm)(V,{"portfolio-id":o.portfolioId},null,8,["portfolio-id"])])),_:1})])),_:1},8,["modelValue"]),o.portfolio.performance.ComputedOn?((0,l.wg)(),(0,l.iD)("span",y,"Computed on: "+(0,l.zw)(o.format(o.portfolio.performance.ComputedOn,"eeee, MMM eo yyyy HH:mm:ss")),1)):(0,l.kq)("",!0)])),_:1})}var w=t(21999),P=t(72229),h=t(24543),q=t(27124);const W=(0,l._)("h6",{class:"q-mb-none q-mt-lg"},"Email status frequency",-1),_={class:"q-pt-lg"};function k(o,e,t,a,r,i){const n=(0,l.up)("q-input"),s=(0,l.up)("q-toggle"),m=(0,l.up)("q-btn"),d=(0,l.up)("q-form");return(0,l.wg)(),(0,l.j4)(d,{ref:"params",onSubmit:o.onSubmit,class:"q-gutter-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(n,{modelValue:o.name,"onUpdate:modelValue":e[0]||(e[0]=e=>o.name=e),label:"Portfolio Name"},null,8,["modelValue"]),(0,l._)("div",null,[W,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.notifications,(o=>((0,l.wg)(),(0,l.j4)(s,{class:"q-mr-lg",key:o.text,modelValue:o.state,"onUpdate:modelValue":e=>o.state=e,label:o.text},null,8,["modelValue","onUpdate:modelValue","label"])))),128))]),(0,l._)("div",_,[(0,l.Wm)(m,{label:"Save",type:"submit",color:"info"}),(0,l.Wm)(m,{label:"Delete",color:"negative",class:"q-ml-sm",onClick:o.deletePortfolio},null,8,["onClick"])])])),_:1},8,["onSubmit"])}t(18964);var S=t(28339),M=t(19302),Z=t(33047),z=t(91569),V=t(45877);const Q=(0,l.aZ)({name:"PortfolioSettings",props:{portfolioId:{type:String,required:!0}},setup(o,e){const t=(0,w.oR)(),a=(0,M.Z)(),r=(0,S.tv)(),i=(0,l.Fl)((()=>t.state.portfolio.current)),n=(0,l.iH)(!1),s=(0,l.iH)(`${i.value.name}`),m=(0,l.iH)({daily:{text:"Daily",value:V.FP,state:!1},weekly:{text:"Weekly",value:V.Qs,state:!1},monthly:{text:"Monthly",value:V.EA,state:!1},annually:{text:"Annually",value:V.DL,state:!1}});function d(){m.value.daily.state=(i.value.notifications&V.FP)==V.FP,m.value.weekly.state=(i.value.notifications&V.Qs)==V.Qs,m.value.monthly.state=(i.value.notifications&V.EA)==V.EA,m.value.annually.state=(i.value.notifications&V.DL)==V.DL}function p(){var o=V.mP;return Object.keys(m.value).forEach((e=>{m.value[e].state&&(o|=m.value[e].value)})),o}async function f(o){o.preventDefault();var e=p();t.commit("portfolio/setNotifications",e),t.commit("portfolio/setPortfolioName",s.value);var l={name:s.value,notifications:e};c(l)}async function u(){Z.bE.getTokenSilently().then((e=>{a.dialog({title:"Confirm",message:"Please confirm that you want to delete this portfolio.",cancel:!0,persistent:!0}).onOk((()=>{z.api["delete"]("/portfolio/"+o.portfolioId,{headers:{Authorization:`Bearer ${e}`}}).then((({data:o})=>{a.notify({message:"Deleted portfolio",progress:!0,color:"positive",icon:"check_circle",position:"top"}),t.dispatch("portfolio/fetchPortfolios"),r.replace("/app/portfolio/")})).catch((o=>{a.notify({message:`Failed to delete portfolio settings: ${o}`,progress:!0,color:"negative",icon:"error",position:"top"})}))}))}))}function c(e){Z.bE.getTokenSilently().then((l=>{z.api.patch("/portfolio/"+o.portfolioId,e,{headers:{Authorization:`Bearer ${l}`}}).then((({data:o})=>{a.notify({message:`Saved portfolio settings: ${o.name} (${o.id})`,progress:!0,color:"positive",icon:"check_circle",position:"top"}),t.dispatch("portfolio/fetchPortfolios")})).catch((o=>{a.notify({message:`Failed to save portfolio settings: ${o}`,progress:!0,color:"negative",icon:"error",position:"top"})}))}))}return(0,l.bv)((()=>{d()})),(0,l.YP)(i,(()=>{s.value=i.value.name,d()})),{confirm:n,deletePortfolio:u,name:s,notifications:m,onSubmit:f,portfolio:i}}});var E=t(11639),x=t(8326),D=t(66611),I=t(23175),L=t(68879),H=t(69984),T=t.n(H);const C=(0,E.Z)(Q,[["render",k]]),F=C;T()(Q,"components",{QForm:x.Z,QInput:D.Z,QToggle:I.Z,QBtn:L.Z});var U=t(50095),B=t(58781);const $=(0,l.aZ)({name:"Portfolio",props:{portfolioId:String},components:{PortfolioHoldings:h.Z,PortfolioReturns:q.Z,PortfolioSettings:F,PortfolioSummary:U.Z,PortfolioTransactions:B.Z},setup(o){const e=(0,w.oR)(),{portfolioId:t}=(0,l.BK)(o),a=(0,l.iH)("summary");e.commit("portfolio/clearCurrentPortfolio"),e.commit("portfolio/clearBenchmark"),e.dispatch("portfolio/fetchPortfolio",o.portfolioId),(0,l.YP)(t,(async(o,t)=>{e.dispatch("portfolio/fetchPortfolio",o)}));const r=(0,l.Fl)((()=>e.state.portfolio.current)),i=(0,l.Fl)((()=>e.state.portfolio.loaded));return{format:P.Z,portfolio:r,portfolioLoaded:i,tabModel:a}}});var A=t(69885),j=t(47817),R=t(70900),O=t(72605),N=t(28052),Y=t(89800),K=t(84106);const G=(0,E.Z)($,[["render",v]]),J=G;T()($,"components",{QPage:A.Z,QTabs:j.Z,QTab:R.Z,QBreadcrumbs:O.Z,QBreadcrumbsEl:N.Z,QTabPanels:Y.Z,QTabPanel:K.Z})}}]);